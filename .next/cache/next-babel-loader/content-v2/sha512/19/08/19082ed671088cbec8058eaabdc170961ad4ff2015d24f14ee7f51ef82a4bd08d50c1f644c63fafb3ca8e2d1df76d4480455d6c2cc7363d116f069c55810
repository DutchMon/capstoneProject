{"ast":null,"code":"import { useEffect } from 'react';\nimport Router from 'next/router';\nimport useSWR from 'swr';\nexport default function useUser({\n  redirectTo = false,\n  redirectIfFound = false\n} = {}) {\n  const {\n    data: user,\n    mutate: mutateUser\n  } = useSWR('/api/user');\n  useEffect(() => {\n    // if no redirect needed, just return (example: already on /dashboard)\n    // if user data not yet there (fetch in progress, logged in or not) then don't do anything yet\n    if (!redirectTo || !user) return;\n\n    if ( // If redirectTo is set, redirect if the user was not found.\n    redirectTo && !redirectIfFound && !(user !== null && user !== void 0 && user.isLoggedIn) || redirectIfFound && user !== null && user !== void 0 && user.isLoggedIn) {\n      Router.push(redirectTo);\n    }\n  }, [user, redirectIfFound, redirectTo]);\n  return {\n    user,\n    mutateUser\n  };\n}","map":{"version":3,"sources":["C:/Users/dutch/Documents/ASU/IFT402/WebApp/DEVELOPMENT/lib/useUser.js"],"names":["useEffect","Router","useSWR","useUser","redirectTo","redirectIfFound","data","user","mutate","mutateUser","isLoggedIn","push"],"mappings":"AAAA,SAASA,SAAT,QAA0B,OAA1B;AACA,OAAOC,MAAP,MAAmB,aAAnB;AACA,OAAOC,MAAP,MAAmB,KAAnB;AAEA,eAAe,SAASC,OAAT,CAAiB;AAC9BC,EAAAA,UAAU,GAAG,KADiB;AAE9BC,EAAAA,eAAe,GAAG;AAFY,IAG5B,EAHW,EAGP;AACN,QAAM;AAAEC,IAAAA,IAAI,EAAEC,IAAR;AAAcC,IAAAA,MAAM,EAAEC;AAAtB,MAAqCP,MAAM,CAAC,WAAD,CAAjD;AAEAF,EAAAA,SAAS,CAAC,MAAM;AACd;AACA;AACA,QAAI,CAACI,UAAD,IAAe,CAACG,IAApB,EAA0B;;AAE1B,SACE;AACCH,IAAAA,UAAU,IAAI,CAACC,eAAf,IAAkC,EAACE,IAAD,aAACA,IAAD,eAACA,IAAI,CAAEG,UAAP,CAAnC,IAECL,eAAe,IAAIE,IAAJ,aAAIA,IAAJ,eAAIA,IAAI,CAAEG,UAJ5B,EAKE;AACAT,MAAAA,MAAM,CAACU,IAAP,CAAYP,UAAZ;AACD;AACF,GAbQ,EAaN,CAACG,IAAD,EAAOF,eAAP,EAAwBD,UAAxB,CAbM,CAAT;AAeA,SAAO;AAAEG,IAAAA,IAAF;AAAQE,IAAAA;AAAR,GAAP;AACD","sourcesContent":["import { useEffect } from 'react'\nimport Router from 'next/router'\nimport useSWR from 'swr'\n\nexport default function useUser({\n  redirectTo = false,\n  redirectIfFound = false,\n} = {}) {\n  const { data: user, mutate: mutateUser } = useSWR('/api/user')\n\n  useEffect(() => {\n    // if no redirect needed, just return (example: already on /dashboard)\n    // if user data not yet there (fetch in progress, logged in or not) then don't do anything yet\n    if (!redirectTo || !user) return\n\n    if (\n      // If redirectTo is set, redirect if the user was not found.\n      (redirectTo && !redirectIfFound && !user?.isLoggedIn) ||\n      // If redirectIfFound is also set, redirect if the user was found\n      (redirectIfFound && user?.isLoggedIn)\n    ) {\n      Router.push(redirectTo)\n    }\n  }, [user, redirectIfFound, redirectTo])\n\n  return { user, mutateUser }\n}\n"]},"metadata":{},"sourceType":"module"}